# bgit - Windows User Guide

**Switch between GitHub accounts with one command.**

---

## Installation

**Option 1: PowerShell (recommended)**
```powershell
irm https://raw.githubusercontent.com/byterings/bgit/main/install.ps1 | iex
```

**Option 2: Installer**
1. Download `bgit-installer.exe` from [Releases](https://github.com/byterings/bgit/releases)
2. Double-click and install (click "More info" → "Run anyway" if Windows warns)
3. Done! bgit is in your PATH

---

## Setup (5 minutes)

### 1. Add Your First Account

```cmd
bgit add
```

Fill in:
- **Alias**: work (short name like work, personal, freelance)
- **Name**: John Doe
- **Email**: john@work.com
- **GitHub Username**: john-work
- **SSH Key**: Choose "Generate new key"

### 2. Add Key to GitHub

Copy the public key shown in terminal.

Go to: https://github.com/settings/keys
- Click "New SSH key"
- Paste the key
- Click "Add SSH key"

### 3. Setup SSH (Important!)

```cmd
bgit setup-ssh
```

This starts SSH agent and loads your keys.

**Run this after:**
- First setup
- Windows restart
- "Permission denied" errors

---

## Daily Use

### Switch Accounts

```cmd
bgit use work
bgit use personal
```

### Clone Repository

```cmd
bgit clone https://github.com/company/repo.git
```

bgit automatically converts URLs to use the correct SSH key.

**Manual SSH URL format:**
```cmd
git clone git@github.com-john-work:company/repo.git
```

**Note:** The SSH host uses your **GitHub username** (e.g., `github.com-john-work`), not the alias.

### Check Active Account

```cmd
bgit list
bgit active
bgit status
```

---

## Workspaces (v0.2.0+)

Create organized folders with automatic identity:

```cmd
cd C:\projects
bgit workspace

REM Creates:
REM   C:\projects\work\      → uses "work" identity
REM   C:\projects\personal\  → uses "personal" identity
```

Now clone inside workspace folders - identity is automatic:

```cmd
cd C:\projects\work
bgit clone https://github.com/company/repo.git
REM Uses "work" identity automatically!
```

---

## Commands

```cmd
bgit add              # Add new account
bgit list             # Show all accounts
bgit use work         # Switch to work account
bgit active           # Show current account
bgit status           # Show identity status and bindings
bgit clone <url>      # Clone with correct SSH config
bgit workspace        # Create organized workspace folders
bgit bind             # Bind current repo to identity
bgit doctor           # Diagnose configuration issues
bgit doctor --fix     # Auto-fix permission issues
bgit setup-ssh        # Fix SSH issues (Windows)
bgit delete work      # Remove account
bgit --help           # Full help
```

---

## Troubleshooting

### "Permission denied (publickey)"
```cmd
bgit setup-ssh
bgit doctor --network
```

### "command not found"
Close and reopen Command Prompt after installation.

### Git asks for password
You're using HTTPS instead of SSH.

**Wrong:** `https://github.com/user/repo.git`
**Right:** Use `bgit clone` or `git@github.com-USERNAME:user/repo.git`

### Check SSH connectivity
```cmd
ssh -T git@github.com-john-work
```
Should show: `Hi john-work! You've successfully authenticated`

---

## Quick Tips

- Always use `bgit clone` for new repos
- Run `bgit setup-ssh` after Windows restart
- Use `bgit status` to check current identity
- Use `bgit doctor` to diagnose issues
- Use workspaces for automatic identity switching

---

## Uninstall

**PowerShell install:**
```powershell
Remove-Item "$env:LOCALAPPDATA\bgit" -Recurse -Force
```

**Installer:** Use Settings → Apps → Installed Apps → bgit → Uninstall

**Clean up (optional):**
```powershell
# Remove bgit config
Remove-Item "$env:USERPROFILE\.bgit" -Recurse -Force

# Remove SSH keys (if generated by bgit)
Remove-Item "$env:USERPROFILE\.ssh\bgit_*" -Force
```

**Restore git config:**
```cmd
git config --global user.name "Your Name"
git config --global user.email "your@email.com"
```

---

**ByteRings** | https://github.com/byterings/bgit
